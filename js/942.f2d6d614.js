"use strict";(globalThis["webpackChunkalarm_light_kittens"]=globalThis["webpackChunkalarm_light_kittens"]||[]).push([[942],{4942:(l,e,a)=>{a.r(e),a.d(e,{default:()=>Y});a(939),a(4520),a(7049),a(4151),a(1746),a(3142),a(8832),a(8825),a(2528),a(4207),a(9188),a(1118),a(4635);var n=a(1347),t=a(4187),s=a(7763),u=a(8633);const o={class:"page-wrapper"},i={class:"container"},d={class:"form-section"},c={class:"form-grid"},v={class:"form-group"},r=["value"],m=["readonly"],p={class:"form-row"},g=["readonly"],k=["readonly"],L={class:"form-group"},h=["value"],A=["readonly"],B={class:"form-row"},f=["readonly"],b=["readonly"],y={class:"form-grid"},C={class:"form-group"},x={class:"form-group"},E={class:"button-group"},_={class:"table-section"},K={class:"table-wrapper"},X={class:"data-table"},w=["onClick"],F={class:"text-center"},R={class:"text-center"},V={class:"text-center"},U=["onClick"],I={class:"graph-section"},J={class:"calculator-controls"},$={class:"control-group"},S=["value"],O={class:"control-group"},W=["value"],j={class:"control-group"},P=["innerHTML"],T={class:"canvas-wrapper"},H={id:"graph",viewBox:"0 0 800 550"},z=["x1","y1","x2","y2"],M=["x","y"],N=["cx","cy"],Q=["x","y"],D={__name:"ShortestPathPage2",setup(l){const e={"อาคาร 1 อาคารอำนวยการ":["18.75877","99.01465"],"อาคาร 2 อาคารสารสนเทศ":["18.75891","99.01526"],"อาคาร 3 อาคารประถมศึกษา":["18.75836","99.01513"],"อาคาร 4 อาคารมัธยมศึกษาตอนต้น":["18.75798","99.01551"],"อาคาร 5 อาคารอนุบาล สระว่ายน้ำ โรงอาหาร":["18.75817","99.01576"],"อาคาร 6 อาคารพลศึกษา ห้องสภานักเรียน":["18.75739","99.01538"],"อาคาร 7 อาคารมัธยมศึกษาตอนปลาย ห้องสมุด":["18.75759","99.01591"]},a=Object.keys(e).map(l=>({label:l,value:l}));a.push({label:"อื่นๆ (กรอกเอง)",value:"other"});const D=[{nameA:"อาคาร 1",latA:"18.75877",lngA:"99.01465",nameB:"อาคาร 3",latB:"18.75836",lngB:"99.01513",distance:"20",time:"20"},{nameA:"อาคาร 3",latA:"18.75836",lngA:"99.01513",nameB:"futsal",latB:"18.757955",lngB:"99.015097",distance:"15",time:"15"},{nameA:"futsal",latA:"18.757955",lngA:"99.015097",nameB:"สนามหญ้าจริง (safe zone)",latB:"18.757826",lngB:"99.014679",distance:"11",time:"11"},{nameA:"อาคาร 2",latA:"18.75891",lngA:"99.01526",nameB:"futsal",latB:"18.757955",lngB:"99.015097",distance:"20",time:"20"},{nameA:"อาคาร 1",latA:"18.75877",lngA:"99.01465",nameB:"อาคาร 2",latB:"18.75891",lngB:"99.01526",distance:"5",time:"5"},{nameA:"อาคาร 2",latA:"18.75891",lngA:"99.01526",nameB:"อาคาร 3",latB:"18.75836",lngB:"99.01513",distance:"20",time:"20"},{nameA:"อาคาร 4",latA:"18.75798",lngA:"99.01551",nameB:"futsal",latB:"18.757955",lngB:"99.015097",distance:"10",time:"10"},{nameA:"อาคาร 5",latA:"18.75817",lngA:"99.01576",nameB:"อาคาร 4",latB:"18.75798",lngB:"99.01551",distance:"12",time:"12"},{nameA:"อาคาร 6",latA:"18.75739",lngA:"99.01538",nameB:"สนามหญ้าจริง (safe zone)",latB:"18.757826",lngB:"99.014679",distance:"20",time:"20"},{nameA:"อาคาร 7",latA:"18.75759",lngA:"99.01591",nameB:"สนามบาสเก็ดบอล",latB:"18.757833",lngB:"99.015761",distance:"15",time:"15"}],q=(0,t.KR)([]),G=(0,t.KR)(-1),Y=(0,n.EW)(()=>-1!==G.value),Z=(0,t.Kh)({selectedA:null,nameA:"",latA:"",lngA:"",selectedB:null,nameB:"",latB:"",lngB:"",distance:"",time:""}),ll=(0,t.KR)(null),el=(0,t.KR)(null),al=(0,t.KR)("distance"),nl=(0,t.KR)(""),tl=(0,t.KR)([]),sl=(0,t.KR)([]),ul=(0,t.KR)({}),ol=(0,t.KR)([]),il=((0,t.KR)(1),(0,t.KR)(window.innerWidth),(0,t.KR)(window.innerHeight),(0,n.EW)(()=>Z.selectedA&&"other"!==Z.selectedA)),dl=(0,n.EW)(()=>Z.selectedB&&"other"!==Z.selectedB);function cl(l){if(l&&"other"!==l){const[a,n]=e[l];Z.nameA=l,Z.latA=a,Z.lngA=n}else Z.nameA="",Z.latA="",Z.lngA=""}function vl(l){if(l&&"other"!==l){const[a,n]=e[l];Z.nameB=l,Z.latB=a,Z.lngB=n}else Z.nameB="",Z.latB="",Z.lngB=""}function rl(){Z.selectedA=null,Z.nameA="",Z.latA="",Z.lngA="",Z.selectedB=null,Z.nameB="",Z.latB="",Z.lngB="",Z.distance="",Z.time="",G.value=-1}function ml(){if(!Z.nameA||!Z.nameB||!Z.distance||!Z.time)return void alert("กรุณากรอกข้อมูลให้ครบ");const l={...Z};delete l.selectedA,delete l.selectedB,Y.value?q.value[G.value]=l:q.value.push(l),kl(),rl(),hl()}function pl(l,a){G.value=a,Z.nameA=l.nameA,Z.latA=l.latA,Z.lngA=l.lngA,Z.nameB=l.nameB,Z.latB=l.latB,Z.lngB=l.lngB,Z.distance=l.distance,Z.time=l.time,Z.selectedA=e[l.nameA]?l.nameA:"other",Z.selectedB=e[l.nameB]?l.nameB:"other"}function gl(){-1!==G.value&&confirm("ต้องการลบข้อมูลนี้หรือไม่?")&&(q.value.splice(G.value,1),kl(),rl(),hl())}function kl(){localStorage.setItem("shortestPaths_v2",JSON.stringify(q.value))}function Ll(){const l=localStorage.getItem("shortestPaths_v2");l?q.value=JSON.parse(l):(q.value=[...D],kl()),hl()}function hl(){const l={},e=[];q.value.forEach(a=>{l[a.nameA]||(l[a.nameA]={lat:parseFloat(a.latA),lng:parseFloat(a.lngA),x:0,y:0}),l[a.nameB]||(l[a.nameB]={lat:parseFloat(a.latB),lng:parseFloat(a.lngB),x:0,y:0}),e.push({a:a.nameA,b:a.nameB,distance:parseFloat(a.distance),time:parseFloat(a.time)})});const a=50,n=800,t=550;let s=1/0,u=-1/0,o=1/0,i=-1/0;const d=Object.keys(l);if(0===d.length)return ul.value={},void(ol.value=[]);d.forEach(e=>{const a=l[e];a.lat<s&&(s=a.lat),a.lat>u&&(u=a.lat),a.lng<o&&(o=a.lng),a.lng>i&&(i=a.lng)});const c=u-s||1,v=i-o||1;d.forEach(e=>{const u=l[e];u.x=(u.lng-o)/v*(n-2*a)+a,u.y=t-((u.lat-s)/c*(t-2*a)+a)}),ul.value=l,ol.value=e}const Al=(0,n.EW)(()=>Object.keys(ul.value).sort());function Bl(l){return ul.value[l]?.x||0}function fl(l){return ul.value[l]?.y||0}function bl(){tl.value=[],sl.value=[],nl.value="";const l=ll.value,e=el.value;if(!l||!e)return void(nl.value="กรุณาเลือกจุดเริ่มต้นและจุดปลายทาง");if(l===e)return nl.value=`จุดเดียวกัน (${l}) ระยะทาง 0`,void(tl.value=[l]);const a={};for(const l in ul.value)a[l]=[];ol.value.forEach(l=>{a[l.a].push({node:l.b,weight:l[al.value]}),a[l.b].push({node:l.a,weight:l[al.value]})});const n={},t={},s=new Set;for(const l in ul.value)n[l]=1/0;n[l]=0;while(1){let l=null,u=1/0;for(const e in ul.value)!s.has(e)&&n[e]<u&&(u=n[e],l=e);if(null===l||l===e)break;s.add(l),a[l]&&a[l].forEach(e=>{const a=n[l]+e.weight;a<n[e.node]&&(n[e.node]=a,t[e.node]=l)})}if(n[e]===1/0)return void(nl.value="ไม่พบเส้นทาง");const u=[];let o=e;while(o)u.unshift(o),o=t[o];tl.value=u;const i=[];for(let l=0;l<u.length-1;l++)i.push({u:u[l],v:u[l+1]});sl.value=i;const d="distance"===al.value?"เมตร":"นาที";nl.value=`\n    เส้นทางที่สั้นที่สุดจาก <strong>${l}</strong> ไป <strong>${e}</strong><br>\n    เส้นทาง: ${u.join(" → ")}<br>\n    ค่ารวมทั้งหมด: <strong>${n[e]} ${d}</strong>\n  `}function yl(l){return tl.value.includes(l)}function Cl(l){return sl.value.some(e=>e.u===l.a&&e.v===l.b||e.u===l.b&&e.v===l.a)}return(0,n.sV)(()=>{Ll()}),(l,e)=>((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",i,[e[33]||(e[33]=(0,n.Lk)("h1",null,"ระบบบันทึกเส้นทางสั้นที่สุดระหว่างอาคาร (V2)",-1)),e[34]||(e[34]=(0,n.Lk)("p",{class:"subtitle"},"โรงเรียนวารีเชียงใหม่ - การศึกษาเพื่ออนาคตก้าวไกล",-1)),(0,n.Lk)("div",d,[e[21]||(e[21]=(0,n.Lk)("h2",{class:"form-title"},"เพิ่มหรือแก้ไขข้อมูลเส้นทาง",-1)),(0,n.Lk)("div",c,[(0,n.Lk)("div",v,[e[16]||(e[16]=(0,n.Lk)("label",null,"อาคาร A",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>Z.selectedA=l),class:"form-input",onChange:e[1]||(e[1]=l=>cl(Z.selectedA))},[e[15]||(e[15]=(0,n.Lk)("option",{value:null},"-- เลือกอาคาร A --",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,t.R1)(a),l=>((0,n.uX)(),(0,n.CE)("option",{key:l.value,value:l.value},(0,s.v_)(l.label),9,r))),128))],544),[[u.u1,Z.selectedA]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>Z.nameA=l),type:"text",placeholder:"ชื่ออาคาร A (ถ้าเลือกอื่นๆ)",class:"form-input mt-2",readonly:il.value},null,8,m),[[u.Jo,Z.nameA]]),(0,n.Lk)("div",p,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>Z.latA=l),type:"text",placeholder:"Latitude",class:"form-input",readonly:il.value},null,8,g),[[u.Jo,Z.latA]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>Z.lngA=l),type:"text",placeholder:"Longitude",class:"form-input",readonly:il.value},null,8,k),[[u.Jo,Z.lngA]])])]),(0,n.Lk)("div",L,[e[18]||(e[18]=(0,n.Lk)("label",null,"อาคาร B",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>Z.selectedB=l),class:"form-input",onChange:e[6]||(e[6]=l=>vl(Z.selectedB))},[e[17]||(e[17]=(0,n.Lk)("option",{value:null},"-- เลือกอาคาร B --",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,t.R1)(a),l=>((0,n.uX)(),(0,n.CE)("option",{key:l.value,value:l.value},(0,s.v_)(l.label),9,h))),128))],544),[[u.u1,Z.selectedB]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>Z.nameB=l),type:"text",placeholder:"ชื่ออาคาร B (ถ้าเลือกอื่นๆ)",class:"form-input mt-2",readonly:dl.value},null,8,A),[[u.Jo,Z.nameB]]),(0,n.Lk)("div",B,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>Z.latB=l),type:"text",placeholder:"Latitude",class:"form-input",readonly:dl.value},null,8,f),[[u.Jo,Z.latB]]),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>Z.lngB=l),type:"text",placeholder:"Longitude",class:"form-input",readonly:dl.value},null,8,b),[[u.Jo,Z.lngB]])])])]),(0,n.Lk)("div",y,[(0,n.Lk)("div",C,[e[19]||(e[19]=(0,n.Lk)("label",null,"ระยะห่าง (เมตร)",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>Z.distance=l),type:"number",placeholder:"เช่น 20",class:"form-input",step:"0.01",min:"0"},null,512),[[u.Jo,Z.distance]])]),(0,n.Lk)("div",x,[e[20]||(e[20]=(0,n.Lk)("label",null,"เวลาเดินทาง (นาที)",-1)),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>Z.time=l),type:"number",placeholder:"เช่น 5",class:"form-input",min:"0"},null,512),[[u.Jo,Z.time]])])]),(0,n.Lk)("div",E,[(0,n.Lk)("button",{onClick:ml,class:"btn btn-primary"},(0,s.v_)(Y.value?"บันทึกการแก้ไข":"เพิ่มข้อมูล"),1),Y.value?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:gl,class:"btn btn-danger"}," ลบ ")):(0,n.Q3)("",!0),Y.value?((0,n.uX)(),(0,n.CE)("button",{key:1,onClick:rl,class:"btn btn-secondary"}," ยกเลิก ")):(0,n.Q3)("",!0)])]),(0,n.Lk)("div",_,[e[23]||(e[23]=(0,n.Lk)("h2",{class:"section-title"},"รายการเส้นทางทั้งหมด",-1)),(0,n.Lk)("div",K,[(0,n.Lk)("table",X,[e[22]||(e[22]=(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",null,"อาคาร A"),(0,n.Lk)("th",null,"Lat A"),(0,n.Lk)("th",null,"Lng A"),(0,n.Lk)("th",null,"อาคาร B"),(0,n.Lk)("th",null,"Lat B"),(0,n.Lk)("th",null,"Lng B"),(0,n.Lk)("th",null,"ระยะ (ม.)"),(0,n.Lk)("th",null,"เวลา (นาที)"),(0,n.Lk)("th",null,"จัดการ")])],-1)),(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(q.value,(l,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:e,class:"table-row",onClick:a=>pl(l,e)},[(0,n.Lk)("td",null,(0,s.v_)(l.nameA),1),(0,n.Lk)("td",null,(0,s.v_)(l.latA),1),(0,n.Lk)("td",null,(0,s.v_)(l.lngA),1),(0,n.Lk)("td",null,(0,s.v_)(l.nameB),1),(0,n.Lk)("td",null,(0,s.v_)(l.latB),1),(0,n.Lk)("td",null,(0,s.v_)(l.lngB),1),(0,n.Lk)("td",F,(0,s.v_)(l.distance),1),(0,n.Lk)("td",R,(0,s.v_)(l.time),1),(0,n.Lk)("td",V,[(0,n.Lk)("button",{class:"btn-link",onClick:(0,u.D$)(a=>pl(l,e),["stop"])},"เลือก",8,U)])],8,w))),128))])])])]),(0,n.Lk)("section",I,[e[31]||(e[31]=(0,n.Lk)("h2",{class:"section-title"},"แสดงกราฟและหาเส้นทางที่สั้นที่สุด",-1)),e[32]||(e[32]=(0,n.Lk)("p",{class:"section-subtitle"},"กราฟอัปเดตอัตโนมัติตามข้อมูลในตาราง",-1)),(0,n.Lk)("div",J,[(0,n.Lk)("div",$,[e[25]||(e[25]=(0,n.Lk)("label",null,"จุดเริ่มต้น",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[12]||(e[12]=l=>ll.value=l),class:"form-input"},[e[24]||(e[24]=(0,n.Lk)("option",{value:null},"-- เลือก --",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Al.value,l=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:l},(0,s.v_)(l),9,S))),128))],512),[[u.u1,ll.value]])]),(0,n.Lk)("div",O,[e[27]||(e[27]=(0,n.Lk)("label",null,"จุดปลายทาง",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[13]||(e[13]=l=>el.value=l),class:"form-input"},[e[26]||(e[26]=(0,n.Lk)("option",{value:null},"-- เลือก --",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Al.value,l=>((0,n.uX)(),(0,n.CE)("option",{key:l,value:l},(0,s.v_)(l),9,W))),128))],512),[[u.u1,el.value]])]),(0,n.Lk)("div",j,[e[29]||(e[29]=(0,n.Lk)("label",null,"เกณฑ์",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e[14]||(e[14]=l=>al.value=l),class:"form-input"},[...e[28]||(e[28]=[(0,n.Lk)("option",{value:"distance"},"ระยะทาง (เมตร)",-1),(0,n.Lk)("option",{value:"time"},"เวลา (นาที)",-1)])],512),[[u.u1,al.value]])]),(0,n.Lk)("button",{onClick:bl,class:"btn btn-primary"}," คำนวณเส้นทาง ")]),(0,n.Lk)("div",{class:"result-box",innerHTML:nl.value||"ยังไม่มีการคำนวณเส้นทาง เลือกจุดเริ่มต้นและปลายทางแล้วกดปุ่ม"},null,8,P),(0,n.Lk)("div",T,[((0,n.uX)(),(0,n.CE)("svg",H,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ol.value,(l,e)=>((0,n.uX)(),(0,n.CE)("line",{key:"e-"+e,x1:Bl(l.a),y1:fl(l.a),x2:Bl(l.b),y2:fl(l.b),class:(0,s.C4)(["edge",{highlight:Cl(l)}])},null,10,z))),128)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ol.value,(l,e)=>((0,n.uX)(),(0,n.CE)("text",{key:"t-"+e,x:(Bl(l.a)+Bl(l.b))/2,y:(fl(l.a)+fl(l.b))/2-4,class:"edge-label","text-anchor":"middle"},(0,s.v_)(l.distance)+" ม. ",9,M))),128)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(ul.value,(l,e)=>((0,n.uX)(),(0,n.CE)("g",{key:"n-"+e},[(0,n.Lk)("circle",{cx:l.x,cy:l.y,r:"7",class:(0,s.C4)(["node",{highlight:yl(e)}])},null,10,N),(0,n.Lk)("text",{x:l.x,y:l.y-12,class:"node-label","text-anchor":"middle"},(0,s.v_)(e),9,Q)]))),128))])),e[30]||(e[30]=(0,n.Fv)('<div class="legend" data-v-55d0af6e><div class="legend-item" data-v-55d0af6e><div class="legend-line" data-v-55d0af6e></div><span data-v-55d0af6e>เส้นเชื่อมปกติ</span></div><div class="legend-item" data-v-55d0af6e><div class="legend-line-highlight" data-v-55d0af6e></div><span data-v-55d0af6e>เส้นทางที่สั้นที่สุด</span></div><div class="legend-item" data-v-55d0af6e><div class="legend-node" data-v-55d0af6e></div><span data-v-55d0af6e>โหนด</span></div><div class="legend-item" data-v-55d0af6e><div class="legend-node-highlight" data-v-55d0af6e></div><span data-v-55d0af6e>โหนดในเส้นทาง</span></div></div>',1))])])])]))}};var q=a(2968);const G=(0,q.A)(D,[["__scopeId","data-v-55d0af6e"]]),Y=G}}]);